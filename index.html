<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tomte Hunt ğŸ…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-red-50 to-green-50 p-6">
    <div class="max-w-md mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-red-600 mb-2">ğŸ… Tomte Hunt! ğŸ„</h1>
            <p class="text-gray-700">Find all the hidden tomtes around the apartment!</p>
            <div id="progress-text" class="mt-4 text-lg font-semibold text-green-700">
                Found: 0 / 10
            </div>
        </div>

        <!-- Progress bar -->
        <div class="w-full bg-gray-200 rounded-full h-3 mb-8">
            <div id="progress-bar" class="bg-green-500 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
        </div>

        <!-- Main content -->
        <div id="game-content"></div>

        <!-- Found tomtes list -->
        <div id="found-list" class="bg-white rounded-lg shadow-lg p-6 mt-6 hidden">
            <h3 class="text-lg font-semibold text-gray-700 mb-3">Already Found:</h3>
            <div id="found-items" class="space-y-2"></div>
        </div>

        <!-- Skipped tomtes list -->
        <div id="skipped-list" class="bg-white rounded-lg shadow-lg p-6 mt-6 hidden">
            <h3 class="text-lg font-semibold text-orange-600 mb-3">Come Back Later:</h3>
            <div id="skipped-items" class="space-y-2"></div>
        </div>
    </div>

    <script>
        const tomtes = [
            { name: "Love Heart Tomte", clue: "Look for the romantic tomte carrying a love heart!", extraHint: "ğŸšª" },
            { name: "Mushroom Tumble Tomte", clue: "Find the clumsy tomte who's fallen over in the mushrooms!", extraHint: "ğŸµğŸ…" },
            { name: "Acorn Cap Tomte", clue: "Spot the woodland tomte with a hat made of an acorn!", extraHint: "ğŸª´ğŸªŸ" },
            { name: "Stripy Hat Tomte", clue: "Search for the stylish tomte in a red and grey striped hat!", extraHint: "ğŸª´ğŸªŸ" },
            { name: "Spotty Hat Tomte", clue: "Discover the tomte with a spotty red and white hat!", extraHint: "â›ª" },
            { name: "Grot Eating Tomte", clue: "Find the hungry tomte enjoying a bowl of grot!", extraHint: "ğŸ“šğŸ‘¨â€ğŸ³" },
            { name: "Tall Hat Tomte", clue: "Look for the tomte with the tall red hat!", extraHint: "ğŸ¹" },
            { name: "Green Pants Tomte", clue: "Spot the tomte with green pants!", extraHint: "ğŸ§¥ğŸº" },
            { name: "Grey Candy Cane Tomte", clue: "Find the tomte with a grey hat and matching grey candy cane!", extraHint: "ğŸ¸ğŸ¾" },
            { name: "Blue Scarf Tomte", clue: "Seek the cozy tomte all wrapped up in a blue and white scarf!", extraHint: "ğŸšªğŸ " }
        ];

        let gameStarted = false;
        let currentClue = 0;
        let foundTomtes = [];
        let skippedTomtes = [];
        let showHint = false;
        let showExtraHint = false;

        function startGame() {
            gameStarted = true;
            render();
        }

        function resetQuiz() {
            currentClue = 0;
            foundTomtes = [];
            skippedTomtes = [];
            showHint = false;
            showExtraHint = false;
            gameStarted = false;
            updateProgress();
            updateFoundList();
            updateSkippedList();
            render();
        }

        function updateProgress() {
            const progressText = document.getElementById('progress-text');
            const progressBar = document.getElementById('progress-bar');
            const percentage = (foundTomtes.length / tomtes.length) * 100;
            
            progressText.textContent = `Found: ${foundTomtes.length} / ${tomtes.length}`;
            progressBar.style.width = `${percentage}%`;
        }

        function updateFoundList() {
            const foundList = document.getElementById('found-list');
            const foundItems = document.getElementById('found-items');
            
            if (foundTomtes.length > 0 && foundTomtes.length < tomtes.length) {
                foundList.classList.remove('hidden');
                foundItems.innerHTML = foundTomtes.map(index => `
                    <div class="flex items-center gap-2 text-gray-600">
                        <svg class="text-green-500" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                        <span>${tomtes[index].name}</span>
                    </div>
                `).join('');
            } else {
                foundList.classList.add('hidden');
            }
        }

        function showClue() {
            showHint = true;
            render();
        }

        function toggleExtraHint() {
            showExtraHint = !showExtraHint;
            render();
        }

        function markFound() {
            // Don't allow marking as found if already found
            if (foundTomtes.includes(currentClue)) {
                return;
            }
            foundTomtes.push(currentClue);
            showHint = false;
            showExtraHint = false;
            moveToNextClue();
            updateProgress();
            updateFoundList();
            updateSkippedList();
            render();
        }

        function skipClue() {
            if (!skippedTomtes.includes(currentClue)) {
                skippedTomtes.push(currentClue);
            }
            showHint = false;
            showExtraHint = false;
            moveToNextClue();
            updateSkippedList();
            render();
        }

        function goBack() {
            // Find the previous clue that hasn't been found
            let prevClue = currentClue - 1;
            while (prevClue >= 0 && foundTomtes.includes(prevClue)) {
                prevClue--;
            }
            
            // If we can't go back in the main sequence, check skipped ones
            if (prevClue < 0 && skippedTomtes.length > 0) {
                const lastSkipped = skippedTomtes.filter(idx => !foundTomtes.includes(idx)).pop();
                if (lastSkipped !== undefined) {
                    currentClue = lastSkipped;
                    showHint = false;
                    showExtraHint = false;
                    render();
                    return;
                }
            }
            
            if (prevClue >= 0) {
                currentClue = prevClue;
                showHint = false;
                showExtraHint = false;
                render();
            }
        }

        function goToSkipped(index) {
            currentClue = index;
            showHint = false;
            showExtraHint = false;
            render();
        }

        function moveToNextClue() {
            // Find the next clue that hasn't been found yet
            let nextClue = currentClue + 1;
            while (nextClue < tomtes.length && foundTomtes.includes(nextClue)) {
                nextClue++;
            }
            
            // If we've gone through all clues, check skipped ones
            if (nextClue >= tomtes.length && skippedTomtes.length > 0) {
                const nextSkipped = skippedTomtes.find(idx => !foundTomtes.includes(idx));
                if (nextSkipped !== undefined) {
                    currentClue = nextSkipped;
                    return;
                }
            }
            
            currentClue = nextClue < tomtes.length ? nextClue : currentClue;
        }

        function updateSkippedList() {
            const skippedList = document.getElementById('skipped-list');
            const skippedItems = document.getElementById('skipped-items');
            
            const activeSkipped = skippedTomtes.filter(idx => !foundTomtes.includes(idx));
            
            if (activeSkipped.length > 0) {
                skippedList.classList.remove('hidden');
                skippedItems.innerHTML = activeSkipped.map(index => `
                    <button onclick="goToSkipped(${index})" class="flex items-center gap-2 text-gray-600 hover:bg-gray-100 p-2 rounded w-full text-left transition-colors">
                        <svg class="text-orange-500" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                        <span>${tomtes[index].name}</span>
                    </button>
                `).join('');
            } else {
                skippedList.classList.add('hidden');
            }
        }

        function render() {
            const gameContent = document.getElementById('game-content');
            const progressText = document.getElementById('progress-text');
            const progressBar = document.getElementById('progress-bar');
            const foundList = document.getElementById('found-list');
            const skippedList = document.getElementById('skipped-list');

            if (!gameStarted) {
                // Hide progress elements on landing page
                progressText.style.display = 'none';
                progressBar.parentElement.style.display = 'none';
                foundList.style.display = 'none';
                skippedList.style.display = 'none';

                gameContent.innerHTML = `
                    <div class="bg-white rounded-lg shadow-lg p-8 text-center">
                        <div class="text-6xl mb-6">ğŸ„</div>
                        <h2 class="text-3xl font-bold text-red-600 mb-6">The Tomte Hide and Seek Game!</h2>
                        
                        <div class="text-left text-gray-700 space-y-4 mb-8 max-w-lg mx-auto">
                            <p>We had our tomtes all set up neatly and properly, but when they heard that we were having a Christmas party they decided they wanted to play their favourite game....hide and seek!</p>
                            
                            <p>The 10 tomtes have hidden themselves around the apartment, see if you can track them all down.</p>
                            
                            <div class="bg-green-50 border-2 border-green-300 rounded-lg p-4 mt-6">
                                <p class="font-semibold text-green-800 mb-2">ğŸ’¡ Hint:</p>
                                <p class="text-sm">The tomtes are all very sneaky, but they don't know how to open doors, cupboards or drawers. So you won't need to look in bedrooms or bathrooms. And please leave them where they are when you find them so they get a chance to play with everyone.</p>
                            </div>
                        </div>
                        
                        <button onclick="startGame()" class="bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-8 rounded-lg transition-colors text-xl">
                            Start the Hunt! ğŸ…
                        </button>
                    </div>
                `;
                return;
            }

            // Show progress elements when game starts
            progressText.style.display = 'block';
            progressBar.parentElement.style.display = 'block';

            const allFound = foundTomtes.length === tomtes.length;

            if (allFound) {
                gameContent.innerHTML = `
                    <div class="bg-white rounded-lg shadow-lg p-8 text-center">
                        <div class="text-6xl mb-4">ğŸ‰</div>
                        <h2 class="text-3xl font-bold text-green-600 mb-4">Congratulations!</h2>
                        <p class="text-xl text-gray-700 mb-6">You found all ${tomtes.length} tomtes!</p>
                        <div class="text-5xl mb-8">ğŸ„âœ¨ğŸ…âœ¨ğŸ„</div>
                        <button onclick="resetQuiz()" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                            ğŸ”„ Reset Hunt
                        </button>
                    </div>
                `;
            } else if (!showHint) {
                gameContent.innerHTML = `
                    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="text-2xl font-bold text-gray-800">Tomte #${currentClue + 1}</h2>
                            <span class="text-4xl">ğŸ</span>
                        </div>
                        <button onclick="showClue()" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-6 rounded-lg transition-colors text-lg">
                            ğŸ Reveal Clue
                        </button>
                    </div>
                `;
            } else {
                const canGoBack = currentClue > 0 || skippedTomtes.some(idx => !foundTomtes.includes(idx) && idx < currentClue);
                const alreadyFound = foundTomtes.includes(currentClue);
                
                gameContent.innerHTML = `
                    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="text-2xl font-bold text-gray-800">Tomte #${currentClue + 1}</h2>
                            <span class="text-4xl">ğŸ</span>
                        </div>
                        <div class="bg-green-50 border-2 border-green-300 rounded-lg p-4 mb-4">
                            <p class="text-lg text-gray-800 text-center">${tomtes[currentClue].clue}</p>
                        </div>
                        ${showExtraHint ? `
                        <div class="bg-yellow-50 border-2 border-yellow-300 rounded-lg p-4 mb-4 text-center">
                            <p class="text-3xl">${tomtes[currentClue].extraHint}</p>
                        </div>
                        ` : `
                        <button onclick="toggleExtraHint()" class="w-full bg-yellow-400 hover:bg-yellow-500 text-white font-bold py-3 px-6 rounded-lg transition-colors text-base mb-4">
                            ğŸ’¡ Extra Hint
                        </button>
                        `}
                        ${alreadyFound ? `
                        <div class="w-full bg-gray-300 text-gray-600 font-bold py-4 px-6 rounded-lg text-lg flex items-center justify-center gap-2 mb-3">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                <polyline points="22 4 12 14.01 9 11.01"></polyline>
                            </svg>
                            Already Found!
                        </div>
                        ` : `
                        <button onclick="markFound()" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-6 rounded-lg transition-colors text-lg flex items-center justify-center gap-2 mb-3">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                <polyline points="22 4 12 14.01 9 11.01"></polyline>
                            </svg>
                            Found It!
                        </button>
                        `}
                        <div class="grid grid-cols-2 gap-3">
                            ${canGoBack ? `
                            <button onclick="goBack()" class="bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition-colors text-base">
                                â¬…ï¸ Back
                            </button>
                            ` : '<div></div>'}
                            <button onclick="skipClue()" class="bg-orange-400 hover:bg-orange-500 text-white font-bold py-3 px-6 rounded-lg transition-colors text-base">
                                Skip â­ï¸
                            </button>
                        </div>
                    </div>
                `;
            }
        }

        // Initialize
        render();
        updateProgress();
        updateSkippedList();
    </script>
</body>
</html>
